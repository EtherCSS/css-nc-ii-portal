<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Network CLI Simulator</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <style>
    :root {
      --primary: #3b82f6; /* PC1 Blue */
      --secondary: #a855f7; /* PC2 Purple */
      --terminal-bg: #0c0c0c;
      --bg-dark: #09090b;
      --surface: rgba(24, 24, 27, 0.6);
      --border: rgba(255, 255, 255, 0.1);
      --text: #f4f4f5;
      --text-muted: #a1a1aa;
      --success: #10b981;
      --radius: 12px;
    }

    * { box-sizing: border-box; outline: none; }
    
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background-color: var(--bg-dark);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      background-image: radial-gradient(circle at 50% 0%, rgba(59, 130, 246, 0.1) 0%, transparent 50%);
    }

    /* --- Header --- */
    header {
      padding: 20px;
      text-align: center;
      border-bottom: 1px solid var(--border);
      background: rgba(9, 9, 11, 0.8);
      backdrop-filter: blur(10px);
    }
    h1 { margin: 0; font-size: 24px; font-weight: 800; color: #fff; letter-spacing: -0.5px; }
    h1 span { color: var(--primary); }
    p { margin: 8px 0 0; color: var(--text-muted); font-size: 14px; }

    /* --- Main Container --- */
    .container {
      max-width: 1200px;
      margin: 40px auto;
      padding: 0 20px;
      width: 100%;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
    }

    /* --- Device Cards --- */
    .device-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 25px;
      transition: transform 0.2s;
      position: relative;
      overflow: hidden;
    }
    .device-card::before {
      content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%;
    }
    .card-pc1::before { background: var(--primary); }
    .card-pc2::before { background: var(--secondary); }

    .card-header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; }
    .device-icon {
      width: 45px; height: 45px; border-radius: 8px;
      display: grid; place-items: center; font-size: 20px; color: #fff;
    }
    .icon-pc1 { background: rgba(59, 130, 246, 0.2); color: var(--primary); }
    .icon-pc2 { background: rgba(168, 85, 247, 0.2); color: var(--secondary); }
    
    .card-title h2 { margin: 0; font-size: 18px; }
    .card-title span { font-size: 12px; color: var(--text-muted); }

    /* Inputs */
    .input-group { margin-bottom: 15px; }
    .input-label { display: block; font-size: 12px; font-weight: 600; color: var(--text-muted); margin-bottom: 6px; text-transform: uppercase; }
    .modern-input {
      width: 100%;
      background: rgba(0,0,0,0.3);
      border: 1px solid var(--border);
      padding: 12px;
      border-radius: 6px;
      color: #fff;
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
      transition: all 0.2s;
    }
    .modern-input:focus { border-color: var(--primary); box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2); }
    .card-pc2 .modern-input:focus { border-color: var(--secondary); box-shadow: 0 0 0 2px rgba(168, 85, 247, 0.2); }

    /* --- Terminal Section --- */
    .terminal-section {
      grid-column: 1 / -1;
      margin-top: 10px;
    }

    .terminal-window {
      background: var(--terminal-bg);
      border-radius: 8px;
      border: 1px solid #333;
      box-shadow: 0 20px 50px rgba(0,0,0,0.5);
      overflow: hidden;
      font-family: 'JetBrains Mono', monospace;
    }

    .term-header {
      background: #1a1a1a;
      padding: 10px 15px;
      display: flex; gap: 8px;
      border-bottom: 1px solid #333;
    }
    .dot { width: 12px; height: 12px; border-radius: 50%; }
    .red { background: #ff5f56; }
    .yellow { background: #ffbd2e; }
    .green { background: #27c93f; }
    .term-title { margin-left: 10px; color: #666; font-size: 12px; font-weight: 600; }

    .term-body {
      padding: 20px;
      height: 300px;
      overflow-y: auto;
      font-size: 14px;
      color: #cccccc;
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .term-line { display: block; word-wrap: break-word; }
    .cmd-prompt { color: var(--success); font-weight: bold; }
    .cmd-path { color: var(--primary); font-weight: bold; }
    .cmd-text { color: #fff; }

    .input-area {
      display: flex;
      align-items: center;
      padding: 10px 20px;
      background: #111;
      border-top: 1px solid #333;
    }
    .cmd-input {
      flex: 1;
      background: transparent;
      border: none;
      color: #fff;
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
      margin-left: 10px;
    }
    .run-btn {
      background: var(--primary);
      color: #000;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      font-weight: 700;
      cursor: pointer;
      font-size: 12px;
    }
    .run-btn:hover { opacity: 0.9; }

    /* Responsive */
    @media (max-width: 768px) {
      .container { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

  <header>
    <h1>Network <span>CLI</span> Simulator</h1>
    <p>Configure devices and test connectivity using standard commands.</p>
  </header>

  <div class="container">
    
    <div class="device-card card-pc1">
      <div class="card-header">
        <div class="device-icon icon-pc1"><i class="fa-solid fa-desktop"></i></div>
        <div class="card-title">
          <h2>PC-01</h2>
          <span>Source Terminal</span>
        </div>
      </div>
      
      <div class="input-group">
        <label class="input-label">IPv4 Address</label>
        <input type="text" id="pc1-ip" class="modern-input" value="192.168.1.10">
      </div>
      <div class="input-group">
        <label class="input-label">Subnet Mask</label>
        <input type="text" id="pc1-mask" class="modern-input" value="255.255.255.0">
      </div>
      <div class="input-group">
        <label class="input-label">Default Gateway</label>
        <input type="text" id="pc1-gw" class="modern-input" value="192.168.1.1">
      </div>
    </div>

    <div class="device-card card-pc2">
      <div class="card-header">
        <div class="device-icon icon-pc2"><i class="fa-solid fa-laptop"></i></div>
        <div class="card-title">
          <h2>PC-02</h2>
          <span>Destination Target</span>
        </div>
      </div>
      
      <div class="input-group">
        <label class="input-label">IPv4 Address</label>
        <input type="text" id="pc2-ip" class="modern-input" value="192.168.1.20">
      </div>
      <div class="input-group">
        <label class="input-label">Subnet Mask</label>
        <input type="text" id="pc2-mask" class="modern-input" value="255.255.255.0">
      </div>
      <div class="input-group">
        <label class="input-label">Default Gateway</label>
        <input type="text" id="pc2-gw" class="modern-input" value="192.168.1.1">
      </div>
    </div>

    <div class="terminal-section">
      <div class="terminal-window">
        <div class="term-header">
          <div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div>
          <span class="term-title">PC-01 â€” Command Prompt</span>
        </div>
        <div class="term-body" id="termOutput">
          <div class="term-line">Microsoft Windows [Version 10.0.19045.3693]</div>
          <div class="term-line">(c) Microsoft Corporation. All rights reserved.</div>
          <br>
          <div class="term-line">Type 'help' for available commands.</div>
          <br>
        </div>
        <div class="input-area">
          <span class="cmd-path">C:\Users\PC1></span>
          <input type="text" id="cmdInput" class="cmd-input" placeholder="Enter command..." autocomplete="off">
          <button class="run-btn" onclick="runCommand()">RUN</button>
        </div>
      </div>
    </div>

  </div>

  <script>
    const termOutput = document.getElementById('termOutput');
    const cmdInput = document.getElementById('cmdInput');

    // Handle Enter Key
    cmdInput.addEventListener('keypress', function (e) {
      if (e.key === 'Enter') runCommand();
    });

    function printLine(text, type = '') {
      const line = document.createElement('div');
      line.className = 'term-line';
      if(type) line.style.color = type;
      line.innerText = text;
      termOutput.appendChild(line);
      termOutput.scrollTop = termOutput.scrollHeight;
    }

    function sameNetwork(ip1, mask1, ip2, mask2) {
      if(!ip1 || !mask1 || !ip2 || !mask2) return false;
      
      const ip1Parts = ip1.split('.').map(Number);
      const mask1Parts = mask1.split('.').map(Number);
      const ip2Parts = ip2.split('.').map(Number);
      const mask2Parts = mask2.split('.').map(Number);

      if (ip1Parts.length !== 4 || ip2Parts.length !== 4) return false;

      // Logic: (IP1 & Mask1) must equal (IP2 & Mask2)
      // AND (Mask1) should usually equal (Mask2) for simple simulation
      for (let i = 0; i < 4; i++) {
        if ((ip1Parts[i] & mask1Parts[i]) !== (ip2Parts[i] & mask2Parts[i])) {
          return false;
        }
      }
      return true;
    }

    function runCommand() {
      const rawCmd = cmdInput.value.trim();
      if (!rawCmd) return;

      // Echo command
      const echo = document.createElement('div');
      echo.className = 'term-line';
      echo.innerHTML = `<span class="cmd-path">C:\\Users\\PC1></span> <span class="cmd-text">${rawCmd}</span>`;
      termOutput.appendChild(echo);

      // Get Values
      const pc1 = {
        ip: document.getElementById("pc1-ip").value.trim(),
        mask: document.getElementById("pc1-mask").value.trim(),
        gw: document.getElementById("pc1-gw").value.trim()
      };
      const pc2 = {
        ip: document.getElementById("pc2-ip").value.trim(),
        mask: document.getElementById("pc2-mask").value.trim(),
        gw: document.getElementById("pc2-gw").value.trim()
      };

      const parts = rawCmd.split(" ");
      const command = parts[0].toLowerCase();

      // --- COMMAND LOGIC ---
      if (command === 'help') {
        printLine("Available commands:");
        printLine("  ipconfig       - Display IP configuration");
        printLine("  ping <target>  - Verify connectivity");
        printLine("  cls            - Clear screen");
      } 
      else if (command === 'cls' || command === 'clear') {
        termOutput.innerHTML = '';
      }
      else if (command === 'ipconfig') {
        printLine("");
        printLine("Ethernet adapter Ethernet:");
        printLine("");
        printLine(`   IPv4 Address. . . . . . . . . . . : ${pc1.ip || "0.0.0.0"}`);
        printLine(`   Subnet Mask . . . . . . . . . . . : ${pc1.mask || "0.0.0.0"}`);
        printLine(`   Default Gateway . . . . . . . . . : ${pc1.gw || "0.0.0.0"}`);
        printLine("");
      } 
      else if (command === 'ping') {
        if (parts.length < 2) {
          printLine("Usage: ping <IP Address>");
        } else {
          const target = parts[1];
          printLine("");
          printLine(`Pinging ${target} with 32 bytes of data:`);

          if (target === pc2.ip) {
            if (sameNetwork(pc1.ip, pc1.mask, pc2.ip, pc2.mask)) {
              // Simulate delay for realism (visual only)
              let count = 0;
              const interval = setInterval(() => {
                count++;
                printLine(`Reply from ${target}: bytes=32 time<1ms TTL=128`);
                if(count >= 4) {
                  clearInterval(interval);
                  printLine("");
                  printLine(`Ping statistics for ${target}:`);
                  printLine("    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss)");
                  printLine("");
                }
              }, 400);
            } else {
              // Different network logic (simplified: Request Timed Out or Destination Unreachable)
              let count = 0;
              const interval = setInterval(() => {
                count++;
                printLine("Request timed out.");
                if(count >= 4) {
                  clearInterval(interval);
                  printLine("");
                  printLine(`Ping statistics for ${target}:`);
                  printLine("    Packets: Sent = 4, Received = 0, Lost = 4 (100% loss)");
                  printLine("");
                }
              }, 400);
            }
          } else if (target === pc1.ip) {
             printLine(`Reply from ${target}: bytes=32 time<1ms TTL=128 (Loopback)`);
          } else {
            printLine("Destination host unreachable.");
          }
        }
      } 
      else {
        printLine(`'${command}' is not recognized as an internal or external command.`);
      }

      cmdInput.value = '';
      termOutput.scrollTop = termOutput.scrollHeight;
    }
  </script>
</body>
</html>